<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Java Synchronization</title>
	<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" media="screen" charset="utf-8" />
</head>
<body>
<div class="container">
<div id="header">
<ul class="pills">
	<li class="active"><a href="index.html">andrewgyq's blog</a></li>
	<li><a href="about.html">About</a></li>
</ul>
</div>

<div id="post">
<h1><a href="">Java基本线程同步</a></h1>

<div class="authoring">2015-05-07</div>
<p><strong>概述</strong></p>
<p>Java提供两种线程同步的机制来确保对共享变量的访问顺序。一种是synchronized关键字，一种是Object类中的wait、notify和notifyAll方法</p>

<p><strong>synchronized关键字</strong></p>
<p>synchronized关键字可以添加在方法和代码块上，在同一时刻只能有一个线程允许访问，其它线程处于等待状态。该互斥性使方法或代码块中的逻辑成为一个原子操作。</p>

<p>在一个线程允许执行方法或代码块之前，需要先获取监视器对象上的锁。在执行完成后，该线程所持有的锁会被自动释放。上一次线程运行时对共享变量所做的修改对下一次线程的动作是可见的。锁被释放时，对共享变量的修改会从CPU缓存刷新到主内存中。锁被获取时，CPU缓存中的内容被置为无效状态，从主内存中重新读取共享变量的值。</p>

<p><strong>当一个线程访问object的一个synchronized(this)同步代码块时，其他线程对object中所有其它synchronized(this)同步代码块的访问将会被阻塞。</strong></p>

<p><strong>Object类的wait、notify、notifyAll方法</strong></p>
<ul>
	<li><strong>wait():</strong>调用wait方法的先决条件是当前线程获取到监视器对象上的锁，需要放在synchronized关键字声明的方法或代码块中。wait方法使线程进入等待状态，分为无超时和有超时两种。</li>
	<li><strong>notify()和notifyAll():</strong>通知线程离开等待状态</li>
</ul>
</div>
</div>
</body>
</html>